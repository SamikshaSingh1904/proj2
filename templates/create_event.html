{#
  create_event.html
  Authors: Beatrix Kim, Bessie Li

  Purpose:
    Display the create event form for users.
#}

{% extends "base.html" %}

{% block main_content %}

<div class="auth-container">
  <div class="auth-card">
    <h1>Create Event</h1>
    <p class="auth-subtitle">
        Fill in the details below to add a new event to the calendar.
    </p>

    <form action="{{ url_for('create_event') }}" 
          method="POST" 
          enctype="multipart/form-data"
          id="event-form">

      <div class="form-group">
        <label for="event-title">Title <span class="required">*</span></label>
        <input type="text"
               id="event-title"
               name="event-title"
               maxlength="30"
               value="{{ title or '' }}"
               required>
        <span class="helper-text">Maximum 30 characters</span>
      </div>

      <div class="form-group">
        <label for="event-date">Date <span class="required">*</span></label>
        <input type="date"
               id="event-date"
               name="event-date"
               value="{{ date or '' }}"
               required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="event-start">Start Time 
            <span class="required">*</span>
          </label>
          <input type="time"
                 id="event-start"
                 name="event-start"
                 value="{{ start or '' }}"
                 required>
        </div>

        <div class="form-group">
          <label for="event-end">End Time 
            <span class="required">*</span>
          </label>
          <input type="time"
                 id="event-end"
                 name="event-end"
                 value="{{ end or '' }}"
                 required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="event-city">City 
            <span class="required">*</span>
          </label>
          <input type="text"
                 id="event-city"
                 name="event-city"
                 maxlength="30"
                 value="{{ city or '' }}"
                 required>
          <span class="helper-text">Maximum 30 characters</span>
        </div>

        <div class="form-group">
          <label for="event-state">State 
            <span class="required">*</span>
          </label>
          <input type="text"
                 id="event-state"
                 name="event-state"
                 maxlength="20"
                 value="{{ state or '' }}"
                 required>
          <span class="helper-text">Maximum 20 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="event-cap">Capacity 
          <span class="helper-text">(optional)</span>
        </label>
        <input type="number"
               id="event-cap"
               name="event-cap"
               min="2"
               max="10000"
               value="{{ cap or '' }}">
        <div class="helper-text">
          Leave blank to use the default capacity 10.
        </div>
      </div>

      <div class="form-group">
        <label for="event-desc">Description</label>
        <textarea id="event-desc"
                  name="event-desc"
                  rows="4"
                  maxlength="300"
                  placeholder="Add event details">{{ desc or '' }}</textarea>
        <span class="helper-text">Maximum 300 characters</span>
      </div>

      <div class="form-group">
        <label for="event-cid">Category <span class="required">*</span></label>
        <select id="event-cid" name="event-cid" required>
          <option value="" disabled {% if not cid %}selected{% endif %}>
            Select a category
          </option>
          {% for c in categories %}
            <option value="{{ c.cid }}"
                    {% if cid == c.cid %}selected{% endif %}>
              {{ c.category }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <span>Time is flexible?</span>
          <input type="checkbox"
                id="event-flexible"
                name="event-flexible"
                {% if flexible %}checked{% endif %}>
        </label>
      </div>

      <div class="form-group">
        <label for="event-photo">Event photo <span class="helper-text">(optional)</span></label>
        <input type="file" id="event-photo" name="event-photo" accept="image/*">
        <div class="helper-text">Upload an image (max 1MB).</div>
      </div>

      <button type="submit" class="btn-submit">Create Event</button>

    </form>
  </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='form_validation.js') }}"></script>
{% endblock %}
