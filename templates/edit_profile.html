{#
  edit_profile.html
  Authors: Beatrix Kim
  Purpose:
    Display the edit profile form for users
    to update their account information.
#}

{% extends "base.html" %}

{% block main_content %}
<div class="auth-container">
  <div class="auth-card">
    <h1>Edit Profile</h1>
    <p class="auth-subtitle">
      Update your profile information
    </p>

    <form method="POST"
          action="{{ url_for('edit_profile') }}"
          id="edit-profile-form">

      <div class="form-group">
        <label for="name">
          Full Name <span class="required">*</span>
        </label>
        <input type="text"
               id="name"
               name="name"
               value="{{ user.name or '' }}"
               placeholder="Jane Doe"
               maxlength="30"
               required>
        <span class="helper-text">Maximum 30 characters</span>
      </div>

      <div class="form-group">
        <label for="email">
          Wellesley Email
        </label>
        <input type="email"
               id="email"
               name="email"
               value="{{ user.email }}"
               disabled>
        <p class="helper-text">
          Email cannot be changed
        </p>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="year">Class Year</label>
          <select id="year" name="year">
            <option value="">Select year...</option>
            {% for y in class_years %}
              <option 
                value="{{ y }}" 
                {% if user.year == y %}
                  selected
                {% endif %}
              >
                {{ y }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="form-group">
          <label for="pronouns">Pronouns</label>
          <input type="text"
                 id="pronouns"
                 name="pronouns"
                 value="{{ user.pronouns or '' }}"
                 maxlength="30"
                 placeholder="she/her, they/them, etc.">
          <span class="helper-text">Maximum 30 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="bio">Bio (Optional)</label>
        <textarea id="bio"
                  name="bio"
                  maxlength="100"
                  placeholder="Tell us a bit about yourself...">
        {{- user.bio or '' -}}</textarea>
        <p class="helper-text">
          Maximum 100 characters
        </p>
      </div>

      <button type="submit"
              class="btn-submit">
        Update Profile
      </button>
      <a href="{{ url_for('profile') }}" 
         class="btn-cancel">
        Cancel
      </a>
    </form>
  </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='form_validation.js') }}"></script>
{% endblock %}
